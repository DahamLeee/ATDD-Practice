# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

### step 1 - 지하철역 인수 테스트 작성
#### 요구사항
이미 작성되어 있는 API 를 통해 인수 테스트를 작성하는 방법과 친숙해져보자!

##### 기능 요구사항
- 지하철역 인수 테스트를 완성하세요.
  - 지하철역 목록 조회 인수 테스트 작성하기
  - 지하철역 삭제 인수 테스트 작성하기

##### 프로그래밍 요구사항
- 인수 테스트의 재사용성과 가독성, 그리고 빠른 테스트 의도 파악을 위해 테스트를 리팩터링 하세요.

> 각각의 테스트를 동작시키면 잘 동작하지만 한 번에 동작시키면 실패할 수 있다. 이번 단계에서는
> 이 부분에 대해 고려하지 말고 각각의 인수 테스트를 작성하고 리팩토링 하는 것에 집중해서 진행하세요.

- API 명세를 확인하고 인수 테스트를 잘 작성해보자.
- 인수 테스트 리팩토링 시 JsonPath 를 잘 활용해보자!

##### JsonPath
- Json 문서를 읽어오는 DSL(Domain Specific Language)
- JsonPath 를 사용하면 ResponseDto 객체로 받을 필요 없이 필요한 값만 추출하여 검증에 사용할 수 있음

### step 2- - 지하철 노선 관리
#### 요구사항
##### 기능 요구사항
- `요구사항 설명`에서 제공되는 인수 조건을 기반으로 `지하철 노선 관리 기능을 구현`하세요.
- 인수 조건을 검증하는 인수 테스트를 작성하세요.

##### 프로그래밍 요구사항
- 아래의 순서로 기능을 구현하세요.
  - 인수 조건을 검증하는 인수 테스트 작성
  - 인수 테스트를 충족하는 기능 구현
- 인수 테스트의 결과가 다른 인수 테스트에 영향을 끼치지 않도록 인수 테스트를 서로 격리 시키세요.
- 인수 테스트의 재사용성과 가독성, 그리고 빠른 테스트 의도 파악을 위해 인수 테스트를 리팩토링 하세요.

#### 인수 테스트 격리
**@DirtiesContext**  
- Spring Context 를 이용한 테스트 동작 시 스프링 빈의 상태가 변경되면 해당 컨텍스트의 재사용이 불가하여 컨텍스트를 다시 로드해야 함
- 스프링 빈의 상태가 변경되었다는 설정을 하는 애너테이션
- 테스트 DB 는 메모리 디비로 컨테이너에 띄워져있는 상태이므로 컨텍스트가 다시 로드되면 기존 DB의 내용이 초기화됨

**@Sql**  
- 테스트 수행 시 특정 쿼리를 동작시키는 애너테이션

**Table Truncate**
- 테이블을 조회하여 각 테이블을 Truncate 시켜주는 방법

> 인수 테스트 격리에 대해서 조금 더 공부하고 어떻게 적용하셨는지 확인해보자.

#### 인수 테스트 리팩터링
**중복 코드 처리**
- 지하철 역과 노선 인수 테스트를 작성하면서 중복되는 부분이 발생하는데 이 부분을 리팩토링하면 부가적인 코드는 테스트로부터 분리되어 테스트에 조금 더 집중할 수 있게됨